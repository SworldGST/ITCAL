<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Income Tax Calculator - New Regime</title>
<style>
  :root {
    --blue: #0b74c4;
    --blue-dark: #065a9e;
    --white: #ffffff;
    --gray: #f5f5f5;
  }
  body {
    font-family: Arial, sans-serif;
    background-color: var(--gray);
    margin: 0;
    padding: 0;
  }
  header {
    background-color: var(--blue);
    color: var(--white);
    padding: 15px;
    text-align: center;
    font-size: 1.4em;
    font-weight: bold;
  }
  main {
    padding: 15px;
    padding-bottom: 60px;
  }
  label {
    display: block;
    margin: 10px 0 5px;
    font-weight: bold;
  }
  select, input {
    width: 100%;
    padding: 10px;
    margin-bottom: 12px;
    border: 1px solid #ccc;
    border-radius: 4px;
    font-size: 1em;
  }
  button {
    width: 100%;
    padding: 12px;
    background-color: var(--blue);
    border: none;
    border-radius: 4px;
    color: var(--white);
    font-size: 1.1em;
    cursor: pointer;
    margin-bottom: 10px;
  }
  button:hover {
    background-color: var(--blue-dark);
  }
  .result {
    background-color: var(--white);
    padding: 15px;
    margin-top: 15px;
    border-radius: 4px;
    font-weight: bold;
    text-align: center;
    font-size: 1.2em;
  }
  footer {
    background-color: var(--blue-dark);
    color: var(--white);
    padding: 10px;
    position: fixed;
    bottom: 0;
    width: 100%;
    text-align: center;
    font-size: 0.9em;
  }
</style>
</head>
<body>

<header>Income Tax Calculator - New Regime</header>

<main id="calculator">
  <label for="fy">Select Financial Year:</label>
  <select id="fy" onchange="updateStdDeduction()">
    <option value="fy24">FY 2024–25 (AY 2025–26)</option>
    <option value="fy25">FY 2025–26 (AY 2026–27)</option>
  </select>

  <h3>Income Heads (₹)</h3>
  <label>Salary Income:</label>
  <input type="number" id="salary" placeholder="Enter Salary Income" value="0" oninput="updateStdDeduction()" />

  <label>House Property Income:</label>
  <input type="number" id="house" placeholder="Enter House Property Income" value="0" />

  <label>Business/Profession Income:</label>
  <input type="number" id="business" placeholder="Enter Business Income" value="0" />

  <label>Capital Gains:</label>
  <input type="number" id="capital" placeholder="Enter Capital Gains" value="0" />

  <label>Other Sources:</label>
  <input type="number" id="other" placeholder="Enter Other Income" value="0" />

  <h3>Deductions Allowed under New Regime (₹)</h3>
  <label>Standard Deduction:</label>
  <input type="number" id="stdDeduction" readonly />

  <label>Employer NPS Contribution (80CCD(2)):</label>
  <input type="number" id="nps" value="0" />

  <label>Agniveer Corpus Fund Deduction:</label>
  <input type="number" id="agniveer" value="0" />

  <button onclick="calculateTax()">Calculate Tax</button>
  <button onclick="savePDF()">Save as PDF</button>

  <div id="result" class="result" style="display:none;"></div>
</main>

<footer>
  Software developed by S World The Complete Accounting Solutions
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script>
function updateStdDeduction() {
  const salary = parseFloat(document.getElementById('salary').value) || 0;
  const stdDeduction = salary > 0 ? 75000 : 0;
  document.getElementById('stdDeduction').value = stdDeduction;
}

function calculateTax() {
  const fy = document.getElementById('fy').value;
  const salary = parseFloat(document.getElementById('salary').value) || 0;
  const house = parseFloat(document.getElementById('house').value) || 0;
  const business = parseFloat(document.getElementById('business').value) || 0;
  const capital = parseFloat(document.getElementById('capital').value) || 0;
  const other = parseFloat(document.getElementById('other').value) || 0;

  const stdDeduction = parseFloat(document.getElementById('stdDeduction').value) || 0;
  const nps = parseFloat(document.getElementById('nps').value) || 0;
  const agniveer = parseFloat(document.getElementById('agniveer').value) || 0;

  const totalIncome = salary + house + business + capital + other;
  const totalDeductions = stdDeduction + nps + agniveer;
  let taxableIncome = totalIncome - totalDeductions;
  if (taxableIncome < 0) taxableIncome = 0;

  let tax = 0;

  if (fy === 'fy24') {
    if (taxableIncome <= 300000) tax = 0;
    else if (taxableIncome <= 600000) tax = (taxableIncome - 300000) * 0.05;
    else if (taxableIncome <= 900000) tax = 300000 * 0.05 + (taxableIncome - 600000) * 0.10;
    else if (taxableIncome <= 1200000) tax = 300000 * 0.05 + 300000 * 0.10 + (taxableIncome - 900000) * 0.15;
    else if (taxableIncome <= 1500000) tax = 300000 * 0.05 + 300000 * 0.10 + 300000 * 0.15 + (taxableIncome - 1200000) * 0.20;
    else tax = 300000 * 0.05 + 300000 * 0.10 + 300000 * 0.15 + 300000 * 0.20 + (taxableIncome - 1500000) * 0.30;

  } else if (fy === 'fy25') {
    if (taxableIncome <= 300000) tax = 0;
    else if (taxableIncome <= 700000) tax = 0; // Rebate u/s 87A
    else if (taxableIncome <= 900000) tax = (taxableIncome - 700000) * 0.10;
    else if (taxableIncome <= 1200000) tax = 200000 * 0.10 + (taxableIncome - 900000) * 0.15;
    else if (taxableIncome <= 1500000) tax = 200000 * 0.10 + 300000 * 0.15 + (taxableIncome - 1200000) * 0.20;
    else tax = 200000 * 0.10 + 300000 * 0.15 + 300000 * 0.20 + (taxableIncome - 1500000) * 0.30;
  }

  tax += tax * 0.04;

  document.getElementById('result').style.display = 'block';
  document.getElementById('result').innerHTML =
    `Total Income: ₹${totalIncome.toLocaleString('en-IN')}<br>` +
    `Deductions: ₹${totalDeductions.toLocaleString('en-IN')}<br>` +
    `Taxable Income: ₹${taxableIncome.toLocaleString('en-IN')}<br>` +
    `<hr>` +
    `Total Tax Payable: ₹${tax.toLocaleString('en-IN', {minimumFractionDigits: 2, maximumFractionDigits: 2})}`;
}

async function savePDF() {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF({ orientation: 'landscape' });

  const fyText = document.getElementById('fy').selectedOptions[0].text;
  const resultText = document.getElementById('result').innerText || "No calculation yet.";

  doc.setFontSize(16);
  doc.text("Income Tax Calculation - New Regime", 10, 20);
  doc.setFontSize(12);
  doc.text(`Financial Year: ${fyText}`, 10, 30);
  doc.text(resultText, 10, 40);

  doc.save("Income_Tax_Calculation.pdf");
}

// Initialize standard deduction
updateStdDeduction();
</script>

</body>
</html>
